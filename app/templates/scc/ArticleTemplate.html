<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" href="{{ url_for('scc.static',filename='bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('scc.static',filename='font-awesome-4.7.0/css/font-awesome.min.css') }}">
    <script src="{{ url_for('scc.static',filename='ckeditor/ckeditor.js') }}"></script>
    <script src="{{ url_for('scc.static',filename='jquery.min.js') }}"></script>
    <script src="{{ url_for('scc.static',filename='bootstrap.min.js') }}"></script>
    <script src="{{ url_for('scc.static',filename='baidu-analysis.js') }}"></script>
    <title>{{ article_by_uuid.title }}</title>
    <style>
        body {background:#313131;}

        .article_title {
            margin-top: 20px;
            text-align: center;
            color: white;
        }
        .article_title > .title {font-size: 24px;}
        .article_title > .author {font-size: 12px;}

        .container {
            padding-top: 20px;
            margin-top: 20px;
            z-index: 999;
            background: white;
            border-radius: 5px;
            box-shadow: 1px 1px 1px 1px #3e3e3e;
        }
        .container > .editor > form > .table > table > tbody > tr > td {
            text-align: left;
            vertical-align: middle!important;
        }
        .container > .editor > form > .table > table > caption {
            text-align: center;
        }

        .share_links {
            margin-top: 20px;
            text-align: center;
            color: white;
        }
        .share_links > div {display: inline-block}
        .share_links > div > i:hover {
            color: #0088ff;
        }

        .container-fluid {
            display: block;
            margin-top: 20px;
        }
        .container-fluid > table {
            margin-left: auto;
            margin-right: auto;
        }
        footer {
            left:0;
            right: 0;
            text-align: center;
            color: white;
        }
        footer > .container-fluid {
            margin-bottom: 10px;
            font-size: 12px;
        }
        footer > .container-fluid > table > tbody > tr > td > a {
            color: #FFFFFF;
        }
        footer > p {
            font-size: 8px;
        }
    </style>
{% if scripts %}
    <script>
        $(window).load(function () {
            CKEDITOR.replace("ckeditor",{
                "height":"600px"
            });
        });
    </script>
{% endif %}
</head>
<body>
<!-- if not allowed to edit, show article normal -->
{% if not scripts %}
    <!-- title and author -->
    <div class="article_title">
        <div class="title title_for_ckeditor">{{ article_by_uuid.title }}</div>
        <div id="uuid" style="display: none;">{{ article_by_uuid.uuid }}</div>
        <div class="author">{{ article_by_uuid.author }}</div>
        <!--<img src="" width="100" height="100">-->
    </div>
    <!-- article content -->
    <div class="container">
        <div class="content_for_ckeditor">{{ article_by_uuid.content|safe }}</div>
    </div>
    <!-- love it  button -->
    <div class="love_it">
        <!-- how to cancel the love ? need don't like button? -->
    </div>
    <!-- ajax comments -->
    <div id="comments"></div>
    <!-- share for social sites-->
    <div class="share_links">
        <div><i class="fa fa-weibo fa-2x" title="分享到微博"></i></div>
        <div style="height: 20px;border-left: #FFFFFF 1px solid;display: inline-block"></div>
        <div><i class="fa fa-wechat fa-2x" title="分享到微信"></i></div>
        <div style="height: 20px;border-left: #FFFFFF 1px solid;display: inline-block"></div>
        <div><i class="fa fa-qq fa-2x" title="分享到QQ"></i></div>
    </div>


    <footer class=footer">
        <div class="container-fluid">
            <table>
                <tr>
                    <td><a href="{{ url_for('scc.scc_root') }}">首页</a></td>
                    <td><div style="height: 10px;border-left: #FFFFFF 1px solid;display: inline-block"></div></td>
                    <td><a href="{{ url_for('main.main_login') }}">登陆</a></td>
                </tr>
            </table>
        </div>
        <p>&copy;&nbsp;2016-2017 版权所有 scc</p>
    </footer>
{% endif %}

<!-- if allowed to edit, transfer article title and article content to CKeditor -->
{% if scripts %}
    <div class="container">
        <div class="editor">
            <form action="" method="post">
            <input type="hidden" name="_crsf_token" value="{{ crsf_token() }}">
            <div class="table">
                <table class="table table-responsive table-bordered table-condensed">
                    <caption>修改文章</caption>
                    <tr>
                        <td>
                        <label for="title">文章标题</label>
                            <input type="text" value="{{ article_by_uuid.title }}" class="form-control" name="title" id="title">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label for="ckeditor">文章正文</label>
                            <textarea id="ckeditor" class="form-control" cols="20" rows="40" name="content">{{ article_by_uuid.content }}</textarea>
                        </td>
                    </tr>
                </table>
            </div>
        </form>
        </div>
    </div>
{% endif %}

<script>
    $(document).ready(function () {
        //if null in <input> tags don't show submit button
        //ajax comments by uuid
        var uuid = $("#uuid").html();
        $.ajax({
            url: "{{ url_for('main.main_temp_2') }}" + "?uuid=" + uuid,
            dataType:"html",
            type: "GET",
            success: function (data) {
                $("#comments").html(data);
            }
        });
    });
</script>
</body>
</html>